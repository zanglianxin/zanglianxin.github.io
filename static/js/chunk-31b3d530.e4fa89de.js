(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31b3d530"],{"0877":function(t,e,a){},"16b0":function(t,e,a){"use strict";a("9a68")},2615:function(t,e,a){"use strict";a("8f79")},"47f18":function(t,e,a){"use strict";a("d1c2")},"51e9":function(t,e,a){"use strict";a("65b6")},"634a":function(t,e,a){"use strict";a.r(e);var i,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("headSearch",{attrs:{dropDown:!1,orderLabel:"订单编号",formInline:t.formInline},on:{searchClick:t.submit}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("选择日期：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.formInline.value,callback:function(e){t.$set(t.formInline,"value",e)},expression:"formInline.value"}})],1)]),a("div",{staticClass:"contentMain"},[a("TablePart",{attrs:{WorkOrderDate:t.WorkOrderDate.currentPageRecords?t.WorkOrderDate.currentPageRecords:[]},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e)}}},[t._v("查看详情")])]}}])}),a("div",{staticClass:"bottom"},[a("div",{staticClass:"info"},[t._v(" 共"+t._s(t.WorkOrderDate.totalCount)+"条记录 第 "+t._s(t.WorkOrderDate.pageIndex)+"/"+t._s(t.WorkOrderDate.totalPage)+" 页 ")]),a("div",{staticClass:"change"},[a("el-button",{attrs:{disabled:t.isdisable},on:{click:t.previousPage}},[t._v("上一页")]),a("el-button",{attrs:{disabled:t.nextDisable},on:{click:t.getNextPage}},[t._v("下一页")])],1)])],1),a("OrderDialog",{attrs:{dialogVisible:t.dialogVisible,orderInfo:t.orderDetail},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e}}})],1)},n=[],s=a("c7eb"),l=a("1da1"),o=(a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("9fe0")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.WorkOrderDate,"highlight-current-row":"","header-cell-style":{background:"#f3f6fb"},"empty-text":"暂时没有数据了"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),a("el-table-column",{attrs:{property:"orderNo",label:"订单编号",width:"200"}}),a("el-table-column",{attrs:{property:"skuName",label:"商品名称",width:"200"}}),a("el-table-column",{attrs:{property:"amount",label:"订单金额(元)"}}),a("el-table-column",{attrs:{property:"innerCode",label:"设备编号"}}),a("el-table-column",{attrs:{property:"status",label:"订单状态"}}),a("el-table-column",{attrs:{property:"createTime",label:"订单日期"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{taskId:e})]}}],null,!0)})],1)},d=[],u=a("ade3"),f=(i={props:{},data:function(){return{currentRow:null}}},Object(u["a"])(i,"props",{WorkOrderDate:{type:Array,required:!0}}),Object(u["a"])(i,"methods",{setCurrent:function(t){this.$refs.singleTable.setCurrentRow(t)},handleCurrentChange:function(t){this.currentRow=t}}),i),p=f,b=(a("2615"),a("2877")),m=Object(b["a"])(p,c,d,!1,null,"bc2bfc1a",null),v=m.exports,h=a("365c"),g=a("91d1"),_=a("6d60"),I={data:function(){return{formInline:{userCode:"",value:""},WorkOrderDate:{},searchData:{pageIndex:1,pageSize:10,orderOn:"",startDate:"",endDate:""},visible:!1,nextDisable:!1,dialogVisible:!1,orderDetail:{}}},components:{headSearch:o["a"],TablePart:v,OrderDialog:_["a"]},created:function(){this.getOrderList()},computed:{isdisable:function(){var t;return(null===(t=this.WorkOrderDate)||void 0===t?void 0:t.pageIndex)<=1}},methods:{submit:function(t){this.searchData.startDate=t.value?t.value[0]:"",this.searchData.endDate=t.value?t.value[1]:"",this.searchData.orderOn=this.formInline.userCode,this.getOrderList(this.searchData)},getOrderList:function(){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){var a,i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h["A"])(t.searchData);case 3:a=e.sent,i=a.data,i.currentPageRecords.forEach((function(t){t.amount=t.amount/100,t.status=Object(g["a"])(t.status),t.createTime=Object(g["c"])(t.createTime),t.updateTime=Object(g["c"])(t.updateTime),t.addr=t.addr.split("-"),t.addr=t.addr[t.addr.length-1]})),t.WorkOrderDate=i,i.currentPageRecords.length<10&&(t.nextDisable=!0),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},handleClick:function(t){this.orderDetail=t.taskId.row,this.dialogVisible=!0},previousPage:function(){this.searchData.pageIndex--,this.getOrderList(this.searchData)},getNextPage:function(){var t=parseInt(this.WorkOrderDate.totalPage)-parseInt(this.WorkOrderDate.pageIndex);1===t&&(this.nextDisable=!0),this.searchData.pageIndex++,this.getOrderList(this.searchData)}}},k=I,C=(a("51e9"),Object(b["a"])(k,r,n,!1,null,"22a1487b",null));e["default"]=C.exports},6379:function(t,e,a){"use strict";a("76bc")},"65b6":function(t,e,a){},"6d60":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"工单详情",visible:t.dialogVisible,width:"30%"},on:{close:t.onClose}},[a("DetailInfo",{ref:"detail",attrs:{detailInfo:t.detailInfo,isRepair:t.isRepair}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["取消"===t.detailInfo.taskStatus?a("el-button",{on:{click:t.reCreate}},[t._v("重新创建")]):t._e(),"待办"===t.detailInfo.taskStatus?a("el-button",{on:{click:t.concelTask}},[t._v("取消工单")]):t._e()],1)],1),a("el-dialog",{staticClass:"concelDialog",attrs:{visible:t.visible,width:"30%",center:"","show-close":!1},on:{"update:visible":function(e){t.visible=e}}},[a("i",{staticClass:"el-icon-warning"}),a("span",{staticClass:"title"},[t._v("取消工单后，将不能恢复，是否确认取消？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"onconcel",on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"onfirm",on:{click:t.onFirm}},[t._v("确 定")])],1)])],1)},r=[],n=a("c7eb"),s=a("1da1"),l=a("91d1"),o=a("365c"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"form",attrs:{model:t.detailInfo,"label-width":"80px"}},[a("div",{staticClass:"taskStatus"},["取消"===t.detailInfo.taskStatus?a("i",{staticClass:"el-icon-warning"}):t._e(),"未支付"===t.detailInfo.status?a("i",{staticClass:"el-icon-bank-card"}):t._e(),"完成"===t.detailInfo.taskStatus||"出货成功"===t.detailInfo.status?a("i",{staticClass:"el-icon-success"}):t._e(),"待办"===t.detailInfo.taskStatus?a("i",{staticClass:"el-icon-question"}):t._e(),a("span",[t._v(t._s(t.detailInfo.taskStatus||t.detailInfo.status))]),"取消"===t.detailInfo.taskStatus?a("img",{attrs:{src:"http://likede2-admin.itheima.net/img/pic_3.e8208e34.png",alt:""}}):t._e(),"未支付"===t.detailInfo.status?a("img",{attrs:{src:"http://likede2-admin.itheima.net/img/pic_0.979e683d.png",alt:""}}):t._e(),"完成"===t.detailInfo.taskStatus||"出货成功"===t.detailInfo.status?a("img",{attrs:{src:"http://likede2-admin.itheima.net/img/pic_4.3b5af41c.png",alt:""}}):t._e(),"待办"===t.detailInfo.taskStatus?a("img",{attrs:{src:"http://likede2-admin.itheima.net/img/pic_1.834b274c.png",alt:""}}):t._e()]),a("el-row",[t.detailInfo.orderNo?a("el-col",{staticClass:"OrderNo",attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"订单编号:"}},[t._v(" "+t._s(t.detailInfo.orderNo)+" ")])],1)]):t._e(),t.detailInfo.orderNo?a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"商品名称:"}},[t._v(" "+t._s(t.detailInfo.skuName)+" ")])],1)]):t._e(),t.detailInfo.orderNo?a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"订单金额:"}},[t._v(" "+t._s(t.detailInfo.amount)+" ")])],1)]):t._e(),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"设备编号:"}},[t._v(" "+t._s(t.detailInfo.innerCode)+" ")])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"创建日期:"}},[t._v(" "+t._s(t.detailInfo.createTime)+" ")])],1)]),"待办"!==t.detailInfo.taskStatus?a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"完成日期:"}},[t._v(" "+t._s(t.detailInfo.updateTime)+" ")])],1)]):t._e(),t.detailInfo.orderNo?a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"支付方式:"}},[t._v(" "+t._s(1===t.detailInfo.payType?"支付宝支付":"微信支付")+" ")])],1)]):t._e(),t.detailInfo.orderNo?t._e():a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t.isRepair?t._e():a("el-form-item",{attrs:{label:"运营人员:"}},[t._v(" "+t._s(t.detailInfo.userName)+" ")]),t.isRepair?a("el-form-item",{attrs:{label:"运维人员:"}},[t._v(" "+t._s(t.detailInfo.userName)+" ")]):t._e()],1)]),t.detailInfo.orderNo?t._e():a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"工单类型:"}},[t._v(" "+t._s(t.detailInfo.taskType&&t.detailInfo.taskType["typeName"])+" ")])],1)]),t.isRepair||t.detailInfo.orderNo?t._e():a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"补货数量:"}},[a("span",{staticStyle:{color:"#4368e1",cursor:"pointer"},attrs:{href:""},on:{click:function(e){return t.addGoodsDetail(t.detailInfo.taskId)}}},[t._v("补货详情")])])],1)]),t.detailInfo.orderNo?t._e():a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"工单方式:"}},[t._v(" "+t._s(t.detailInfo.createType)+" ")])],1)]),t.detailInfo.orderNo?a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"设备地址:"}},[t._v(" "+t._s(t.detailInfo.addr)+" ")])],1)]):t._e(),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},["取消"===t.detailInfo.taskStatus?a("el-form-item",{attrs:{label:"取消原因:"}},[t._v(" "+t._s(t.detailInfo.desc)+" ")]):t._e(),"完成"===t.detailInfo.taskStatus||"待办"===t.detailInfo.taskStatus?a("el-form-item",{attrs:{label:"备注:"}},[t._v(" "+t._s(t.detailInfo.desc)+" ")]):t._e()],1)]),t.isRepair&&"完成"===t.detailInfo.taskStatus?a("el-col",{staticClass:"address",attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{label:"定位:"}},[a("span",[t._v(" "+t._s(t.detailInfo.addr))])])],1)]):t._e()],1)],1),a("addGoodsDialog",{ref:"taskDetail",attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}})],1)},d=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"补货详情",visible:t.visible,modal:!1},on:{close:t.onClose}},[a("el-table",{staticClass:"addGoodsDialog",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"250"}},[a("el-table-column",{attrs:{prop:"channelCode",label:"货道编号"}}),a("el-table-column",{attrs:{prop:"skuName",label:"商品"}}),a("el-table-column",{attrs:{prop:"expectCapacity",label:"补货数量"}})],1)],1)},f=[],p={data:function(){return{tableData:[]}},props:{visible:{type:Boolean,required:!0}},created:function(){},methods:{onClose:function(){this.$emit("update:visible",!1)},getAddGoodsDetail:function(t){var e=this;return Object(s["a"])(Object(n["a"])().mark((function a(){var i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["q"])(t);case 2:i=a.sent,e.tableData=i.data;case 4:case"end":return a.stop()}}),a)})))()}}},b=p,m=(a("47f18"),a("2877")),v=Object(m["a"])(b,u,f,!1,null,"e719dd02",null),h=v.exports,g={data:function(){return{visible:!1}},props:{detailInfo:{type:Object,required:!0},isRepair:{type:Boolean}},components:{addGoodsDialog:h},computed:{},created:function(){},methods:{addGoodsDetail:function(t){this.visible=!0,this.$refs.taskDetail.getAddGoodsDetail(t)}}},_=g,I=(a("dfbd"),Object(m["a"])(_,c,d,!1,null,"4d368a8a",null)),k=I.exports,C={components:{DetailInfo:k},props:{dialogVisible:{type:Boolean,required:!0},isRepair:{type:Boolean},orderInfo:{type:Object}},data:function(){return{detailInfo:{},visible:!1}},watch:{orderInfo:function(){this.detailInfo=this.orderInfo}},created:function(){},methods:{getTaskInfo:function(t){var e=this;return Object(s["a"])(Object(n["a"])().mark((function a(){var i,r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o["N"])(t);case 3:i=a.sent,r=i.data,isNaN(r.createType)||(r.createType=1===r.createType?"手动":"自动"),r.createTime=Object(l["c"])(r.createTime),r.updateTime=Object(l["c"])(r.updateTime),r.taskStatus=Object(l["b"])(r.taskStatus),e.detailInfo=r,a.next=14;break;case 12:a.prev=12,a.t0=a["catch"](0);case 14:case"end":return a.stop()}}),a,null,[[0,12]])})))()},onClose:function(){this.$emit("update:dialogVisible",!1)},reCreate:function(){this.$emit("reCreate",this.detailInfo),this.onClose()},concelTask:function(){this.visible=!0},onFirm:function(){var t=this;return Object(s["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["m"])(t.detailInfo);case 2:t.visible=!1,t.$emit("updata:dialogVisible",!1),t.$emit("reGetTask"),t.onClose();case 6:case"end":return e.stop()}}),e)})))()}}},D=C,O=(a("6379"),Object(m["a"])(D,i,r,!1,null,"02aef51b",null));e["a"]=O.exports},"76bc":function(t,e,a){},"8f79":function(t,e,a){},"91d1":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return s}));a("ac1f"),a("5319"),a("c740");var i=function(t){return t=t.replace("T"," ").replace("-",".").replace("-","."),t},r=function(t){var e=["待办","进行","取消","完成"];return e[t-1]},n=function(t,e){var a=["待办","进行","取消","完成"];return e=a.findIndex((function(e){return e===t}))+1,e},s=function(t){var e=["未支付","支付完成","出货成功","出货失败"];return e[t]}},"9a68":function(t,e,a){},"9fe0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:t.orderLabel+":"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.formInline.userCode,callback:function(e){t.$set(t.formInline,"userCode","string"===typeof e?e.trim():e)},expression:"formInline.userCode"}})],1),t.dropDown?a("el-form-item",{attrs:{label:t.stateLabel+":"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.formInline.region,callback:function(e){t.$set(t.formInline,"region",e)},expression:"formInline.region"}},t._l(t.dropDownList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1):t._e(),a("el-form-item",[t._t("default")],2),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.$emit("searchClick",t.formInline)}}},[t._v("查询")])],1)],1)],1)},r=[],n={props:{dropDown:{type:Boolean,default:!1},orderLabel:{type:String},stateLabel:{type:String},dropDownList:{type:Array},formInline:{type:Object}},data:function(){return{}},created:function(){},methods:{}},s=n,l=(a("16b0"),a("2877")),o=Object(l["a"])(s,i,r,!1,null,"d0407384",null);e["a"]=o.exports},c740:function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").findIndex,n=a("44d2"),s=a("ae40"),l="findIndex",o=!0,c=s(l);l in[]&&Array(1)[l]((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!c},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(l)},d1c2:function(t,e,a){},dfbd:function(t,e,a){"use strict";a("0877")}}]);