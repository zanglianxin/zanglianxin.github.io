(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d5a20c6"],{3923:function(e,t,a){"use strict";a("5b03")},"5b03":function(e,t,a){},"73fa":function(e,t,a){"use strict";a("961e")},"90fe":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("headSearch",{attrs:{dropDown:!0,orderLabel:"工单编号",stateLabel:"工单状态",dropDownList:e.dropDownList,formInline:e.formInline},on:{searchClick:e.submit}}),a("div",{staticClass:"contentMain"},[a("newImportButton",{attrs:{isImportBtn:!0},on:{addTask:e.addTask,taskConfig:e.taskConfig}}),a("tableModule",{attrs:{WorkOrderDate:e.WorkOrderDate.currentPageRecords?e.WorkOrderDate.currentPageRecords:[],taskSearchData:e.taskSearchData},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.taskId.row.taskId)}}},[e._v("查看详情")])]}}])}),a("div",{staticClass:"bottom"},[a("div",{staticClass:"info"},[e._v(" 共"+e._s(e.WorkOrderDate.totalCount)+"条记录 第 "+e._s(e.WorkOrderDate.pageIndex)+"/"+e._s(e.WorkOrderDate.totalPage)+" 页 ")]),a("div",{staticClass:"change"},[a("el-button",{attrs:{disabled:e.isdisable},on:{click:e.previousPage}},[e._v("上一页")]),a("el-button",{attrs:{disabled:e.nextDisable},on:{click:e.getNextPage}},[e._v("下一页")])],1)])],1),a("My-dialog",{ref:"dialog",attrs:{dialogVisible:e.dialogVisible,taskSearchData:e.taskSearchData},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},reCreate:e.reCreateTask,reGetTask:e.reGetTask}}),a("addDialog",{ref:"addDialog",attrs:{visible:e.addvisible,isRepair:e.taskSearchData.isRepair},on:{"update:visible":function(t){e.addvisible=t},reGetTaskList:e.reGetTaskList}}),a("ConfigDialog",{attrs:{visible:e.configvisible},on:{"update:visible":function(t){e.configvisible=t},reGetTask:e.reGetTask}})],1)},r=[],i=a("5530"),n=a("c7eb"),o=a("1da1"),c=(a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("9fe0")),l=a("1926"),d=a("6874"),u=a("365c"),h=a("6d60"),b=a("d706"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"工单配置",visible:e.visible},on:{close:e.onClose}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"补货警戒线",prop:"name"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:100},model:{value:e.ruleForm.supply,callback:function(t){e.$set(e.ruleForm,"supply",t)},expression:"ruleForm.supply"}})],1),a("el-form-item",{staticClass:"btn-part"},[a("el-button",{staticClass:"concel-btn",on:{click:e.onConcel}},[e._v("取消")]),a("el-button",{staticClass:"onfirm-btn",on:{click:e.onFirm}},[e._v("确认")])],1)],1)],1)},f=[],p={data:function(){return{ruleForm:{supply:""},rules:{name:[]}}},props:{visible:{type:Boolean,required:!0}},created:function(){},methods:{onConcel:function(){this.$emit("update:visible",!1),this.ruleForm.supply=""},onClose:function(){this.$emit("update:visible",!1),this.ruleForm.supply=""},onFirm:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["fb"])(e.ruleForm.supply);case 2:e.onClose(),e.$emit("reGetTask");case 4:case"end":return t.stop()}}),t)})))()}}},g=p,v=(a("3923"),a("2877")),m=Object(v["a"])(g,k,f,!1,null,"e1bd65de",null),D=m.exports,C={data:function(){return{formInline:{userCode:"",region:""},dropDownList:["待办","进行","取消","完成"],WorkOrderDate:{},taskSearchData:{pageIndex:1,innerCode:"",userId:"",taskCode:"",status:"",isRepair:!1},nextDisable:!1,dialogVisible:!1,visible:!1,addvisible:!1,configvisible:!1,reCreateInfo:{},regetUserList:[]}},created:function(){this.taskSearch(this.taskSearchData)},methods:{taskSearch:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var s,r,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(u["gb"])(e);case 3:r=a.sent,i=r.data,null===i||void 0===i||null===(s=i.currentPageRecords)||void 0===s||s.forEach((function(e){e.createType=0===e.createType?"自动":"手动",e.createTime=e.createTime.replace("T"," ").replace("-",".").replace("-",".")})),t.WorkOrderDate=i,i.currentPageRecords.length<10&&(t.nextDisable=!0),a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](0);case 12:case"end":return a.stop()}}),a,null,[[0,10]])})))()},reGetTaskList:function(){this.taskSearchData={pageIndex:1,innerCode:"",userId:"",taskCode:"",status:"",isRepair:!1},this.taskSearch(this.taskSearchData)},reGetTask:function(){this.reGetTaskList()},handleClick:function(e){this.dialogVisible=!0,this.$refs.dialog.getTaskInfo(e)},getNextPage:function(){var e=parseInt(this.WorkOrderDate.totalPage)-parseInt(this.WorkOrderDate.pageIndex);1===e&&(this.nextDisable=!0),this.taskSearchData.pageIndex++,this.taskSearch(this.taskSearchData)},previousPage:function(e){this.taskSearchData.pageIndex--,this.taskSearch(this.taskSearchData)},submit:function(e){switch(this.taskSearchData.taskCode=e.userCode,e.region){case"待办":this.taskSearchData.status=1;break;case"进行":this.taskSearchData.status=2;break;case"取消":this.taskSearchData.status=3;break;case"完成":this.taskSearchData.status=4;break;default:this.taskSearchData.status="";break}this.taskSearch(this.taskSearchData)},addTask:function(){this.addvisible=!0,this.$refs.addDialog.getTaskStatus()},reCreateTask:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var s,r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.addTask(),a.next=3,t.$refs.addDialog.getInnerCode(e.innerCode);case 3:return a.next=5,Object(u["q"])(e.taskId);case 5:s=a.sent,r=s.data,t.reCreateInfo=Object(i["a"])(Object(i["a"])({},e),{},{details:r}),t.$refs.addDialog.reShowInfo(t.reCreateInfo);case 9:case"end":return a.stop()}}),a)})))()},taskConfig:function(){this.configvisible=!0}},components:{headSearch:c["a"],newImportButton:l["a"],tableModule:d["a"],MyDialog:h["a"],addDialog:b["a"],ConfigDialog:D},computed:{isdisable:function(){var e;return(null===(e=this.WorkOrderDate)||void 0===e?void 0:e.pageIndex)<=1}}},S=C,x=(a("73fa"),Object(v["a"])(S,s,r,!1,null,"495d1b72",null));t["default"]=x.exports},"961e":function(e,t,a){}}]);