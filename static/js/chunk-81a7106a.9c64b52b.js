(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81a7106a"],{"0321":function(e,t,r){"use strict";r("179b")},"179b":function(e,t,r){},"1ce7":function(e,t,r){},2558:function(e,t,r){},"2dd9":function(e,t,r){"use strict";r("7eae")},"6ff3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("headSearch",{attrs:{orderLabel:"人员搜索",formInline:e.formInline},on:{searchClick:e.searchClick}}),r("el-card",{staticClass:"form-card"},[r("newImportBtn",{attrs:{isImportBtn:!1},nativeOn:{click:function(t){return e.addPeople(t)}}}),r("tableModule",{attrs:{userDate:e.userDate,userTitleList:e.userTitleList,userKeyList:e.userKeyList,pageIndex:e.data.pageIndex},scopedSlots:e._u([{key:"custom",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.editClick(t)}}},[e._v("修改")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.delClick(t)}}},[e._v("删除")])]}}])}),r("layPage",{attrs:{data:e.data,preDisplay:e.preDisplay,nextDisplay:e.nextDisplay},on:{prevClick:e.prevClick,nextClick:e.nextClick}})],1),r("addPeople",{ref:"addpeople",attrs:{dialogVisible:e.isVisible},on:{"update:dialogVisible":function(t){e.isVisible=t},"update:dialog-visible":function(t){e.isVisible=t},"add-success":e.getPeopleList}})],1)},n=[],s=r("c7eb"),l=r("1da1"),i=(r("e9c4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",{attrs:{label:e.orderLabel+":"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formInline.userCode,callback:function(t){e.$set(e.formInline,"userCode",t)},expression:"formInline.userCode"}})],1),e.dropDown?r("el-form-item",{attrs:{label:e.stateLabel+":"}},[r("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.dropDownList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1):e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.$emit("searchClick",e.formInline)}}},[e._v("查询")])],1)],1)],1)}),o=[],c={props:{dropDown:{type:Boolean,default:!1},orderLabel:{type:String},stateLabel:{type:String},dropDownList:{type:Array},formInline:{type:Object}},data:function(){return{}},created:function(){},methods:{}},u=c,p=(r("2dd9"),r("2877")),d=Object(p["a"])(u,i,o,!1,null,"82af3ad2",null),f=d.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"appBtn"},[r("el-button",{staticClass:"newBtn",attrs:{type:"primary"}},[r("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新建")]),e.isImportBtn?r("el-button",{staticClass:"importBtn",attrs:{type:"primary",plain:""}},[e._v("导入数据")]):e._e()],1)},b=[],g={props:{isImportBtn:{type:Boolean,required:!0}},data:function(){return{}},created:function(){},methods:{}},h=g,v=(r("d912"),Object(p["a"])(h,m,b,!1,null,"f55aac00",null)),y=v.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.userDate,"highlight-current-row":"","header-cell-style":{background:"#f3f6fb"},"empty-text":"暂时没有数据了"},on:{"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{type:"index",index:e.number,width:"100",label:"序号"}}),e._l(e.userKeyList,(function(t,a){return r("el-table-column",{key:a,attrs:{property:t,label:e.userTitleList[a],width:"240"}})})),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("custom",null,{data:t.row})]}}],null,!0)},[e._t("default")],2)],2)},k=[],w={props:{userKeyList:{type:Array,required:!0},userTitleList:{type:Array,required:!0},userDate:{type:Array,required:!0},pageIndex:{required:!0}},data:function(){return{currentRow:null}},methods:{setCurrent:function(e){this.$refs.singleTable.setCurrentRow(e)},handleCurrentChange:function(e){this.currentRow=e}},computed:{number:function(){return 10*this.pageIndex-9}}},C=w,I=(r("fcb9"),Object(p["a"])(C,x,k,!1,null,"82ad4888",null)),P=I.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block"},[r("div",{staticClass:"left"},[r("span",[e._v("共"+e._s(e.data.totalCount)+"条记录")]),r("span",[e._v("第"+e._s(e.data.pageIndex)+"/"+e._s(e.data.totalPage)+"页")])]),r("div",{staticClass:"right"},[r("el-button",{attrs:{type:"info",plain:"",size:"small",disabled:e.preDisplay},on:{click:function(t){return e.$emit("prevClick",e.data.pageIndex)}}},[e._v("上一页")]),r("el-button",{attrs:{type:"info",plain:"",size:"small",disabled:e.nextDisplay},on:{click:function(t){return e.$emit("nextClick",e.data.pageIndex)}}},[e._v("下一页")])],1)])},j=[],L={data:function(){return{}},props:{data:{type:Object,required:!0},nextDisplay:{type:Boolean,default:!1},preDisplay:{type:Boolean,default:!0}},created:function(){},methods:{}},_=L,$=(r("e6bd"),Object(p["a"])(_,O,j,!1,null,"3bec2737",null)),D=$.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"dialog",attrs:{title:e.titleChoose,visible:e.dialogVisible,width:"40%"},on:{close:e.onClose}},[r("el-form",{ref:"formPeople",attrs:{model:e.formPeople,"label-width":"100px",rules:e.formRules}},[r("el-form-item",{attrs:{label:"人员名称：",prop:"userName"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入",maxlength:"5","show-word-limit":""},model:{value:e.formPeople.userName,callback:function(t){e.$set(e.formPeople,"userName",t)},expression:"formPeople.userName"}})],1),r("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择"},model:{value:e.formPeople.roleId,callback:function(t){e.$set(e.formPeople,"roleId",t)},expression:"formPeople.roleId"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),r("el-form-item",{attrs:{label:"联系电话：",prop:"mobile"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.formPeople.mobile,callback:function(t){e.$set(e.formPeople,"mobile",t)},expression:"formPeople.mobile"}})],1),r("el-form-item",{attrs:{label:"负责区域：",prop:"regionId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择"},model:{value:e.formPeople.regionId,callback:function(t){e.$set(e.formPeople,"regionId",t)},expression:"formPeople.regionId"}},e._l(e.regionsList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"头像："}},[r("el-upload",{staticClass:"avatar-uploader peopleImg",attrs:{action:"#","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"http-request":e.httpRequest,"on-success":e.handleAvatarSuccess}},[e.formPeople.image?r("img",{staticClass:"avatar Img",attrs:{src:e.formPeople.image}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("span",{staticClass:"tip"},[e._v("支持扩展名：jpg、png，文件不得大于100kb")])],1),r("el-form-item",{attrs:{label:"状态："}},[r("el-checkbox",{attrs:{label:"是否启用",name:"type"},model:{value:e.formPeople.status,callback:function(t){e.$set(e.formPeople,"status",t)},expression:"formPeople.status"}})],1),r("el-form-item",{staticClass:"btn",staticStyle:{width:"80%"}},[r("el-button",{on:{click:e.onClose}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)},S=[],B=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("159b"),r("b0c0"),r("365c")),R={data:function(){return{formPeople:{userName:"",roleId:"",mobile:"",regionId:"",regionName:"",status:!1,image:""},formRules:{userName:[{required:!0,message:"请输入内容",trigger:"blur"}],roleId:[{required:!0,message:"请输入内容",trigger:"change"}],mobile:[{required:!0,message:"请输入内容",trigger:"blur"},{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"手机号格式不正确",trigger:"blur"}],regionId:[{required:!0,message:"请输入内容",trigger:"change"}]},rolesList:[],regionsList:[]}},props:{dialogVisible:{type:Boolean,default:!1}},created:function(){this.getRolesList(),this.getRegionsList()},methods:{onClose:function(){console.log("关闭"),this.$emit("update:dialogVisible",!1),this.$refs.formPeople.resetFields(),this.formPeople={userName:"",roleId:"",mobile:"",regionId:"",regionName:"",status:!1,image:""}},beforeAvatarUpload:function(e){try{var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024<100;return t||this.$message.error("上传头像图片只能是 JPG或者PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 100KB!"),t&&r}catch(a){console.log(a)}},handleAvatarSuccess:function(e,t){this.formPeople.image=URL.createObjectURL(t.raw)},getRolesList:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["H"])();case 2:r=t.sent,e.rolesList=r.data;case 4:case"end":return t.stop()}}),t)})))()},getRegionsList:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["E"])();case 2:r=t.sent,e.regionsList=r.data.currentPageRecords;case 4:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.formPeople.id){t.next=9;break}return t.next=4,Object(B["o"])(e.formPeople.id,e.formPeople);case 4:e.$message.success("修改成功"),e.onClose(),e.$emit("add-success"),t.next=15;break;case 9:return e.regionsList.forEach((function(t){t.id===e.formPeople.regionId&&(e.formPeople.regionName=t.name)})),t.next=12,Object(B["g"])(e.formPeople);case 12:e.$message.success("添加成功"),e.onClose(),e.$emit("add-success");case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0),e.$message.error("添加失败");case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))()},httpRequest:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function r(){var a,n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=new FormData,a.append("fileName",e.file),console.log(a),r.next=5,Object(B["f"])(a);case 5:n=r.sent,t.formPeople.image=n.data;case 7:case"end":return r.stop()}}),r)})))()}},computed:{titleChoose:function(){return"新增人员"}}},q=R,A=(r("0321"),Object(p["a"])(q,N,S,!1,null,"487afec3",null)),V=A.exports,F={data:function(){return{data:{},userDate:[],formInline:{userCode:""},userTitleList:["人员名称","归属区域","角色","联系电话"],userKeyList:["userName","regionName","role.roleName","mobile"],preDisplay:!0,nextDisplay:!1,isVisible:!1}},created:function(){this.getPeopleList()},methods:{getPeopleList:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function r(){var a;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B["C"])(e);case 3:a=r.sent,console.log(a),t.data=a.data,t.userDate=a.data.currentPageRecords,r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](0);case 11:case"end":return r.stop()}}),r,null,[[0,9]])})))()},prevClick:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=parseInt(e.data.pageIndex)-1,t.next=3,e.getPeopleList({pageIndex:r});case 3:if(1!=e.data.pageIndex){t.next=5;break}return t.abrupt("return",e.preDisplay=!0);case 5:case"end":return t.stop()}}),t)})))()},nextClick:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.preDisplay=!1,r=parseInt(e.data.pageIndex)+1,t.next=4,e.getPeopleList({pageIndex:r});case 4:if(console.log(e.data.pageIndex),e.data.pageIndex!==e.data.totalPage){t.next=7;break}return t.abrupt("return",e.nextDisplay=!0);case 7:case"end":return t.stop()}}),t)})))()},searchClick:function(e){this.getPeopleList({userName:e.userCode})},addPeople:function(){this.isVisible=!0},editClick:function(e){console.log(e),this.isVisible=!0,this.$refs.addpeople.formPeople=JSON.parse(JSON.stringify(e.data))},delClick:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B["n"])(e.data.id);case 3:t.$message.success("删除成功"),t.getPeopleList(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$message.error(r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},components:{headSearch:f,newImportBtn:y,tableModule:P,layPage:D,addPeople:V}},E=F,J=Object(p["a"])(E,a,n,!1,null,"ce991eec",null);t["default"]=J.exports},"7eae":function(e,t,r){},d912:function(e,t,r){"use strict";r("1ce7")},e285:function(e,t,r){},e6bd:function(e,t,r){"use strict";r("2558")},e9c4:function(e,t,r){var a=r("23e7"),n=r("d066"),s=r("d039"),l=n("JSON","stringify"),i=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,r){var a=r.charAt(t-1),n=r.charAt(t+1);return o.test(e)&&!c.test(n)||c.test(e)&&!o.test(a)?"\\u"+e.charCodeAt(0).toString(16):e},p=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&a({target:"JSON",stat:!0,forced:p},{stringify:function(e,t,r){var a=l.apply(null,arguments);return"string"==typeof a?a.replace(i,u):a}})},fcb9:function(e,t,r){"use strict";r("e285")}}]);