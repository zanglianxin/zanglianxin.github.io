(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-095626f7"],{"09d7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn",style:e.style},[e._t("default")],2)},r=[],i={data:function(){return{style:{backgroundColor:this.bgcolor,color:this.fscolor,fontSize:this.fs}}},props:{bgcolor:{type:String,default:"#5f84ff"},fscolor:{type:String,default:"#fff"},fs:{type:String,default:"14px"}},created:function(){},methods:{}},o=i,s=(a("9eb6"),a("2877")),l=Object(s["a"])(o,n,r,!1,null,"79c904de",null);t["a"]=l.exports},2052:function(e,t,a){},"27ba":function(e,t,a){},3387:function(e,t,a){"use strict";a("33a7")},3393:function(e,t,a){"use strict";a("6cf8")},"33a7":function(e,t,a){},4617:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{style:e.style},[e._t("default")],2)},r=[],i={data:function(){return{style:{color:this.color,fontSize:this.fontSize}}},props:["color","fontSize"],created:function(){},methods:{}},o=i,s=(a("de82"),a("2877")),l=Object(s["a"])(o,n,r,!1,null,"2ba9db4a",null);t["a"]=l.exports},"53bd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"head-card"},[a("MyInput",{staticClass:"search-inp",attrs:{title:"点位搜索"},on:{enter:e.input}}),a("span",[e._v("区域搜索：")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择活动区域"},model:{value:e.areaName,callback:function(t){e.areaName=t},expression:"areaName"}},e._l(e.areaSearchList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),a("MyButton",{staticClass:"search-btn",nativeOn:{click:function(t){return e.search(t)}}},[a("span",{staticClass:"el-icon-search",staticStyle:{"margin-right":"5px"}}),e._v("查询")])],1),a("el-card",{staticClass:"main-card"},[a("MyButton",{staticClass:"new-btn",attrs:{bgcolor:"#ff7830"},nativeOn:{click:function(t){e.dialogVisible=!0}}},[a("span",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"margin-right":"5px"}}),e._v("新建")]),a("MyTable",{attrs:{operateWidth:"250",tableList:e.pointList,propertyList:e.propArr,headList:e.headArr,loading:e.loading,pageIndex:e.pageIndex},scopedSlots:e._u([{key:"manipulate",fn:function(t){return[a("MySpan",{staticClass:"detail-btn",attrs:{color:"#5f84ff"},nativeOn:{click:function(a){return e.detail(t)}}},[e._v("查看详情")]),a("MySpan",{staticClass:"edit-btn",attrs:{color:"#5f84ff"},nativeOn:{click:function(a){return e.edit(t)}}},[e._v("修改")]),a("MySpan",{attrs:{color:"#fe5a7e"},nativeOn:{click:function(a){return e.del(t)}}},[e._v("删除")])]}}])}),"1"!==e.totalPage?a("MyPagination",{attrs:{totalCount:e.totalCount,totalPage:e.totalPage,pageIndex:e.pageIndex},on:{next:e.nextPage,prev:e.prevPage}}):e._e()],1),a("detailDialog",{ref:"pointDetail",attrs:{detailVisible:e.detailVisible},on:{"update:detailVisible":function(t){e.detailVisible=t},"update:detail-visible":function(t){e.detailVisible=t}}}),a("AddDialog",{ref:"AddDialog",attrs:{areaSearchList:e.areaSearchList,dialogVisible:e.dialogVisible},on:{getRefresh:e.pointSearch,"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}})],1)},r=[],i=a("c7eb"),o=a("1da1"),s=(a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("b0c0"),a("e593")),l=a("09d7"),c=a("b5b3"),d=a("4617"),u=a("bfaa"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"点位详情",visible:e.detailVisible,width:"35%","close-on-click-modal":!1},on:{close:e.closeDialog,open:e.openDialog}},[a("DetailTable",{attrs:{propertyList:e.propArr,tableList:e.pointDetailList,headList:e.headArr}})],1)},p=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList,"highlight-current-row":"","header-cell-style":{background:"#f3f6fb"}}},[a("el-table-column",{attrs:{type:"index",width:"80",label:"序号",index:e.number}}),e._l(e.propertyList,(function(t,n){return a("el-table-column",{key:t,attrs:{property:t,label:e.headList[n]}})}))],2)],1)},b=[],g={name:"MyTable",data:function(){return{}},props:{tableList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},headList:{type:Array,default:function(){return[]}},propertyList:{type:Array,default:function(){return[]}},operateWidth:{type:String,default:"80"},pageIndex:{default:1}},created:function(){},computed:{number:function(){return 10*this.pageIndex-9}},methods:{}},h=g,v=a("2877"),y=Object(v["a"])(h,m,b,!1,null,"0dc54fd6",null),x=y.exports,D=a("8bd7"),w=a("5a0c"),O=a.n(w),I={data:function(){return{pointId:"",pointDetailList:[],headArr:["机器编号","设备状态","最后一次供货时间"],propArr:["innerCode","vmStatus","updateTime"]}},props:{detailVisible:{type:Boolean,default:!1}},components:{DetailTable:x},created:function(){},methods:{closeDialog:function(){this.$emit("update:detailVisible",!1)},getPointDetail:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["m"])(e.pointId);case 2:a=t.sent,n=a.data,console.log(n),n.forEach((function(e){e.vmStatus=e.vmStatus?"运营":"未投放",e.updateTime=O()(e.updateTime).format("YYYY.MM.DD HH:mm:ss")})),e.pointDetailList=n;case 7:case"end":return t.stop()}}),t)})))()},openDialog:function(){this.getPointDetail()}}},j=I,k=(a("7ea5"),Object(v["a"])(j,f,p,!1,null,"ba2325b4",null)),S=k.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.formData.id?"修改点位":"新增点位",visible:e.dialogVisible,width:"35%","close-on-click-modal":!1},on:{close:e.closeDialog,closed:e.closed,open:e.openDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"120px",rules:e.formRules}},[a("el-form-item",{attrs:{label:"点位名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"15","show-word-limit":""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"所在区域：",prop:"regionId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.regionId,callback:function(t){e.$set(e.formData,"regionId",t)},expression:"formData.regionId"}},e._l(e.areaSearchList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"所属商圈：",prop:"businessId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.businessId,callback:function(t){e.$set(e.formData,"businessId",t)},expression:"formData.businessId"}},e._l(e.businessAreaList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"归属合作商：",prop:"ownerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.ownerId,callback:function(t){e.$set(e.formData,"ownerId",t)},expression:"formData.ownerId"}},e._l(e.partnerList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"详细地址：",prop:"selections"}},[a("el-cascader",{attrs:{size:"large",options:e.options,placeholder:"请输入",clearable:""},on:{change:e.handleChange},model:{value:e.formData.selections,callback:function(t){e.$set(e.formData,"selections",t)},expression:"formData.selections"}})],1),a("el-form-item",{attrs:{prop:"addr2"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",type:"textarea",maxlength:"60","show-word-limit":""},model:{value:e.formData.addr2,callback:function(t){e.$set(e.formData,"addr2",t)},expression:"formData.addr2"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-btn",on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{staticClass:"qd-btn",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},_=[],C=a("5530"),T=(a("a15b"),a("ef6c")),$={data:function(){return{formData:{name:"",regionId:"",businessId:"",ownerId:"",addr:"",addr2:"",selections:[]},formRules:{name:[{required:!0,message:"请输入",trigger:"blur"}],regionId:[{required:!0,message:"请输入",trigger:"change"}],businessId:[{required:!0,message:"请输入",trigger:"change"}],ownerId:[{required:!0,message:"请输入",trigger:"change"}],addr2:[{required:!0,message:"请输入",trigger:"blur"}],selections:[{required:!0,message:"请输入",trigger:"change"}]},businessAreaList:[],partnerList:[],options:T["regionData"]}},props:{dialogVisible:{type:Boolean,default:!1},areaSearchList:{type:Array,default:function(){return[]}}},created:function(){},methods:{closeDialog:function(){this.$emit("update:dialogVisible",!1)},closed:function(){this.$refs.form.resetFields(),this.formData={name:"",regionId:"",businessId:"",ownerId:"",addr:"",addr2:"",selections:[]}},openDialog:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["d"])();case 2:return a=t.sent,n=a.data,e.businessAreaList=n,t.next=7,Object(D["l"])({pageSize:1e4});case 7:r=t.sent,e.partnerList=r.data.currentPageRecords;case 9:case"end":return t.stop()}}),t)})))()},handleChange:function(e){console.log(e);var t=[];e.forEach((function(e){t.push(T["CodeToText"][e])})),this.formData.addr=t.join("-")},confirm:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.formData.id){t.next=10;break}return e.formData.addr+="-"+e.formData.addr2,a="",e.partnerList.forEach((function(t){t.id===e.formData.ownerId&&(a=t.name)})),t.next=6,Object(D["j"])(e.formData.id,Object(C["a"])(Object(C["a"])(Object(C["a"])({},e.formData),e.formData),{},{areaCode:e.formData.selections[e.formData.selections.length-1],createUserId:e.formData.createUserId,ownerName:a}));case 6:e.closeDialog(),e.$emit("getRefresh"),t.next=25;break;case 10:return t.prev=10,t.next=13,e.$refs.form.validate();case 13:return e.formData.addr+="-"+e.formData.addr2,n="",e.partnerList.forEach((function(t){t.id===e.formData.ownerId&&(n=t.name)})),t.next=18,Object(D["b"])(Object(C["a"])(Object(C["a"])({},e.formData),{},{areaCode:e.formData.selections[e.formData.selections.length-1],createUserId:1,ownerName:n}));case 18:e.closeDialog(),e.$emit("getRefresh"),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](10),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[10,22]])})))()}}},A=$,P=(a("98e3"),Object(v["a"])(A,L,_,!1,null,"c7b0bf44",null)),E=P.exports,V={data:function(){return{keywords:"",areaName:"",areaSearchList:[],dialogVisible:!1,pointList:[],totalCount:"",totalPage:"",pageIndex:"",btnLoading:!1,propArr:["name","region.name","businessType.name","ownerName","detailAddress"],headArr:["点位名称","所在区域","商圈类型","合作商","详细地址"],loading:!1,detailVisible:!1}},components:{MyInput:s["a"],MyButton:l["a"],MyTable:c["a"],MySpan:d["a"],MyPagination:u["a"],detailDialog:S,AddDialog:E},created:function(){this.getAreaSearchInput(),this.pointSearch()},methods:{input:function(e){this.keywords=e},search:function(){this.pointSearch()},getAreaSearchInput:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["k"])({pageIndex:1,pageSize:1e4});case 2:a=t.sent,n=a.data,e.areaSearchList=n.currentPageRecords,console.log(e.areaSearchList);case 6:case"end":return t.stop()}}),t)})))()},pointSearch:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.btnLoading=!0,t.next=5,Object(D["o"])({pageIndex:e.pageIndex,pageSize:10,name:e.keywords,regionId:e.areaName});case 5:a=t.sent,n=a.data,console.log(n),e.pageIndex=n.pageIndex,e.totalCount=n.totalCount,e.totalPage=n.totalPage,n.currentPageRecords.forEach((function(e){var t=e.addr.split("-"),a=t[t.length-1];e.detailAddress=a})),e.pointList=n.currentPageRecords,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0);case 18:return t.prev=18,e.loading=!1,e.btnLoading=!1,t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[0,15,18,22]])})))()},detail:function(e){this.detailVisible=!0,this.$refs.pointDetail.pointId=e.data.id},edit:function(e){console.log(e.data),this.dialogVisible=!0,this.$refs.AddDialog.formData.id=e.data.id,this.$refs.AddDialog.formData.name=e.data.name,this.$refs.AddDialog.formData.regionId=e.data.regionId,this.$refs.AddDialog.formData.businessId=e.data.businessId,this.$refs.AddDialog.formData.ownerId=e.data.ownerId;var t=e.data.addr.split("-");this.$refs.AddDialog.formData.addr2=t[t.length-1],console.log(t.length);var a=[];4===t.length?a.push(T["TextToCode"][t[0]].code,T["TextToCode"][t[0]][t[1]].code,T["TextToCode"][t[0]][t[1]][t[2]].code):3===t.length&&a.push(T["TextToCode"][t[0]].code,T["TextToCode"][t[0]][t[1]].code),this.$refs.AddDialog.formData.selections=a,this.$refs.AddDialog.formData.createUserId=e.data.createUserId},del:function(e){var t=this;this.$confirm("此操作将永久删除该点位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(D["g"])(e.data.id);case 2:t.pointSearch(),t.$message({type:"success",message:"删除成功!"});case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},nextPage:function(){this.pageIndex++,this.pointSearch()},prevPage:function(){this.pageIndex--,this.pointSearch()}}},M=V,N=(a("3387"),Object(v["a"])(M,n,r,!1,null,"b75df8c8",null));t["default"]=N.exports},"6cf8":function(e,t,a){},"76a4":function(e,t,a){"use strict";a("a78a")},"7ea5":function(e,t,a){"use strict";a("2052")},"8bd7":function(e,t,a){"use strict";a.d(t,"k",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"h",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"n",(function(){return l})),a.d(t,"l",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"i",(function(){return u})),a.d(t,"f",(function(){return f})),a.d(t,"p",(function(){return p})),a.d(t,"o",(function(){return m})),a.d(t,"m",(function(){return b})),a.d(t,"g",(function(){return g})),a.d(t,"d",(function(){return h})),a.d(t,"b",(function(){return v})),a.d(t,"j",(function(){return y}));var n=a("b775"),r=function(e){return Object(n["a"])({url:"/vm-service/region/search",params:e})},i=function(e,t){return Object(n["a"])({url:"/vm-service/region",method:"POST",data:{regionName:e,remark:t}})},o=function(e,t,a){return Object(n["a"])({url:"/vm-service/region/"+e,method:"PUT",data:{regionName:t,remark:a}})},s=function(e){return Object(n["a"])({url:"/vm-service/region/"+e,method:"DELETE"})},l=function(e){return Object(n["a"])({url:"vm-service/node/search",params:e})},c=function(e){return Object(n["a"])({url:"/user-service/partner/search",params:e})},d=function(e){return Object(n["a"])({url:"/user-service/partner",method:"POST",data:e})},u=function(e,t){return Object(n["a"])({url:"/user-service/partner/"+e,method:"PUT",data:t})},f=function(e){return Object(n["a"])({url:"/user-service/partner/"+e,method:"DELETE"})},p=function(e){return Object(n["a"])({url:"/user-service/partner/resetPwd/"+e,method:"PUT"})},m=function(e){return Object(n["a"])({url:"/vm-service/node/search",params:e})},b=function(e){return Object(n["a"])({url:"/vm-service/node/vmList/"+e})},g=function(e){return Object(n["a"])({url:"/vm-service/node/"+e,method:"DELETE"})},h=function(){return Object(n["a"])({url:"vm-service/businessType"})},v=function(e){return Object(n["a"])({url:"/vm-service/node",method:"POST",data:e})},y=function(e,t){return Object(n["a"])({url:"/vm-service/node/"+e,method:"PUT",data:t})}},"98e3":function(e,t,a){"use strict";a("27ba")},"9eb6":function(e,t,a){"use strict";a("f29d")},a78a:function(e,t,a){},b5b3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList,"highlight-current-row":"","header-cell-style":{background:"#f3f6fb"}}},[a("el-table-column",{attrs:{type:"index",width:"80",label:"序号",index:e.number}}),e._l(e.propertyList,(function(t,n){return a("el-table-column",{key:t,attrs:{property:t,label:e.headList[n]}})})),a("el-table-column",{attrs:{width:e.operateWidth,property:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("manipulate",null,{data:t.row})]}}],null,!0)})],2)],1)},r=[],i={name:"MyTable",data:function(){return{}},props:{tableList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},headList:{type:Array,default:function(){return[]}},propertyList:{type:Array,default:function(){return[]}},operateWidth:{type:String,default:"80"},pageIndex:{default:1}},created:function(){},computed:{number:function(){return 10*this.pageIndex-9}},methods:{}},o=i,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,"6354c064",null);t["a"]=l.exports},bfaa:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration",staticStyle:{color:"#dbdfe5"}},[e._v("共"+e._s(e.totalCount)+"条记录 第"+e._s(e.pageIndex)+"/"+e._s(e.totalPage)+"页")]),a("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:e.btnLoading,expression:"btnLoading"}],attrs:{"page-size":10,layout:"total, prev, next","prev-text":"上一页","next-text":"下一页",total:e.totalCount-0},on:{"prev-click":e.prevClick,"next-click":e.nextClick}})],1)},r=[],i={name:"Pagination",data:function(){return{}},created:function(){},props:{totalCount:{type:String,default:""},totalPage:{type:String,default:""},pageIndex:{default:""},btnLoading:{type:Boolean,default:!1}},methods:{prevClick:function(){this.$emit("prev")},nextClick:function(){this.$emit("next")}}},o=i,s=(a("3393"),a("2877")),l=Object(s["a"])(o,n,r,!1,null,"0942571a",null);t["a"]=l.exports},de82:function(e,t,a){"use strict";a("f0691")},e593:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("span",[e._v(" "+e._s(e.title)+" ")]),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入内容",clearable:""},on:{change:e.enterFn},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("template",{slot:"suffix"},[e._t("html")],2)],2)],1)},r=[],i=(a("498a"),{data:function(){return{value:""}},props:{title:{type:String,default:"工单编号:"},html:{type:String,default:":"}},created:function(){},methods:{enterFn:function(){this.$emit("enter",this.value.trim())}}}),o=i,s=(a("76a4"),a("2877")),l=Object(s["a"])(o,n,r,!1,null,"53cc41c6",null);t["a"]=l.exports},f0691:function(e,t,a){},f29d:function(e,t,a){}}]);