(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-494be0f2"],{"0717":function(t,e,a){},"16b0":function(t,e,a){"use strict";a("9a68")},"2dc7":function(t,e,a){"use strict";a("baf6")},4856:function(t,e,a){},6351:function(t,e,a){},"69e3":function(t,e,a){"use strict";a("4856")},"9a68":function(t,e,a){},"9fe0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:t.orderLabel+":"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.formInline.userCode,callback:function(e){t.$set(t.formInline,"userCode","string"===typeof e?e.trim():e)},expression:"formInline.userCode"}})],1),t.dropDown?a("el-form-item",{attrs:{label:t.stateLabel+":"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.formInline.region,callback:function(e){t.$set(t.formInline,"region",e)},expression:"formInline.region"}},t._l(t.dropDownList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1):t._e(),a("el-form-item",[t._t("default")],2),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.$emit("searchClick",t.formInline)}}},[t._v("查询")])],1)],1)],1)},r=[],s={props:{dropDown:{type:Boolean,default:!1},orderLabel:{type:String},stateLabel:{type:String},dropDownList:{type:Array},formInline:{type:Object}},data:function(){return{}},created:function(){},methods:{}},o=s,i=(a("16b0"),a("2877")),l=Object(i["a"])(o,n,r,!1,null,"d0407384",null);e["a"]=l.exports},a067:function(t,e,a){"use strict";a("0717")},ac34:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("head-search",{attrs:{formInline:t.formInline,orderLabel:t.orderLabel},on:{searchClick:t.searchFn}}),a("div",{staticClass:"contentMain"},[a("Mytable",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{WorkOrderDate:t.sellData.currentPageRecords?t.sellData.currentPageRecords:[],pageIndex:t.pageIndex},on:{modifyClick:t.modifyClick}}),a("div",{staticClass:"bottom"},[a("div",{staticClass:"info"},[t._v(" 共"+t._s(t.sellData.totalCount)+"条记录 第 "+t._s(t.sellData.pageIndex)+"/"+t._s(t.sellData.totalPage)+" 页 ")]),a("div",{staticClass:"change"},[a("el-button",{attrs:{disabled:t.isdisable},on:{click:t.previousPage}},[t._v("上一页")]),a("el-button",{attrs:{disabled:t.nextDisable},on:{click:t.getNextPage}},[t._v("下一页")])],1)]),t.isShowDialog?a("aisleDialog",{attrs:{isShowDialog:t.isShowDialog,dialogData:t.dialogData||[]},on:{"update:isShowDialog":function(e){t.isShowDialog=e},"update:is-show-dialog":function(e){t.isShowDialog=e}}}):t._e()],1)],1)},r=[],s=a("c7eb"),o=a("1da1"),i=(a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("9fe0")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.WorkOrderDate,"highlight-current-row":"","header-cell-style":{background:"#f3f6fb"},"empty-text":"暂时没有数据了"},on:{"current-change":t.handleCurrentChange,select:t.select,"select-all":t.selectAll}},[a("el-table-column",{attrs:{type:"index",width:"100",label:"序号",index:t.number}}),a("el-table-column",{attrs:{property:"innerCode",label:"设备编号",width:"250"}}),a("el-table-column",{attrs:{property:"type.name",label:"设备型号",width:"250"}}),a("el-table-column",{attrs:{property:"node.addr",label:"详细地址"}}),a("el-table-column",{attrs:{property:"vmStatus",label:"运营状态",width:"180"}}),a("el-table-column",{staticClass:"status",attrs:{property:"status",label:"设备状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{class:[{failure:!e.row.status[10001]},{success:!!e.row.status[10001]}],attrs:{type:"text",size:"small"}},[t._v(" 离线 ")]),a("el-button",{class:[{failure:!e.row.status[10002]},{success:!!e.row.status[10002]}],attrs:{type:"text",size:"small"}},[t._v(" 货道 ")]),a("el-button",{class:[{failure:!e.row.status[10003]},{success:!!e.row.status[10003]}],attrs:{type:"text",size:"small"}},[t._v(" 传动抽 ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.$emit("modifyClick",e.row)}}},[t._v(" 查看详情 ")])]}}])})],1)},c=[],u={props:{WorkOrderDate:{type:Array,required:!0},pageIndex:{type:String},BatchOperate:{type:Array}},data:function(){return{currentRow:null}},methods:{setCurrent:function(t){this.$refs.singleTable.setCurrentRow(t)},handleCurrentChange:function(t){this.currentRow=t},select:function(t,e){this.$emit("update:BatchOperate",t)},selectAll:function(t){this.$emit("update:BatchOperate",t)}},computed:{number:function(){return 10*this.pageIndex-9}}},d=u,p=(a("69e3"),a("2877")),f=Object(p["a"])(d,l,c,!1,null,"0123e236",null),h=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"货道设置",visible:t.isShowDialog,width:"40%"},on:{close:t.onClose}},[a("div",{staticClass:"cab",staticStyle:{height:"300px",width:"100%"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[t._v(" 销售量: "),a("span",[t._v(" "+t._s(t.CountDataL)+"个")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[t._v(" 销售额: "),a("span",[t._v(" "+t._s(t.marketData)+"元")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[t._v(" 补货次数: "),a("span",[t._v(" "+t._s(t.Count)+"次")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[t._v(" 维修次数: "),a("span",[t._v(" "+t._s(t.RepairCount)+"次")])])])],1),a("div",[t._v("商品销量（月）")]),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dataShow"},[t._l(t.SkuCollect,(function(e,n){return a("el-col",{key:n,attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple product"},[a("b",[t._v(" "+t._s(e.skuName))]),t._v(": "+t._s(e.count)+" ")])])})),t.textIsShow?a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light"},[t._v("当前设备未销售商品")])]):t._e()],2)],1)])],1)},m=[],b=a("5a0c"),v=a.n(b),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"appBtn"},[a("el-button",{staticClass:"newBtn",attrs:{type:"primary"},on:{click:function(e){return t.$emit("click",e)}}},[t.pic?a("i",{staticClass:"el-icon-circle-plus-outline"}):t._e(),t._t("default",[t._v(" 新建")])],2)],1)},w=[],C={props:{pic:{type:Boolean,default:!0}},data:function(){return{}},created:function(){},methods:{}},x=C,O=(a("2dc7"),Object(p["a"])(x,D,w,!1,null,"07d4c3aa",null)),y=O.exports,k=a("365c"),S={props:{isShowDialog:{type:Boolean,required:!0},dialogData:{type:Object,required:!0}},data:function(){return{rowData:{},channelList:[],marketData:"",CountDataL:"",Count:"",RepairCount:"",SkuCollect:[],textIsShow:!1,loading:!1}},created:function(){this.getOrderAmount(),this.getOrderCount(),this.getSupplyCount(),this.getRepairCount(),this.getSkuCollect()},methods:{onClose:function(){this.$emit("update:isShowDialog",!1),this.textIsShow=!1},getOrderAmount:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["y"])({start:t.startDate,end:t.endDate,innerCode:t.innerCode});case 2:a=e.sent,t.marketData=a.data;case 4:case"end":return e.stop()}}),e)})))()},getOrderCount:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["z"])({start:t.startDate,end:t.endDate,innerCode:t.innerCode});case 2:a=e.sent,t.CountDataL=a.data;case 4:case"end":return e.stop()}}),e)})))()},getSupplyCount:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n,r,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={vm:t.dialogData.vmType,nodeId:t.dialogData.nodeId,createUserId:t.$store.state.user.userInfo.userId},n=v()().startOf("M").format("YYYY-MM-DD"),r=v()().endOf("D").format("YYYY-MM-DD"),e.next=5,Object(k["M"])(t.innerCode,n,r,a);case 5:o=e.sent,t.Count=o.data;case 7:case"end":return e.stop()}}),e)})))()},getRepairCount:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n,r,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={vm:t.dialogData.vmType,nodeId:t.dialogData.nodeId,createUserId:t.$store.state.user.userInfo.userId},n=v()().startOf("M").format("YYYY-MM-DD"),r=v()().endOf("D").format("YYYY-MM-DD"),e.next=5,Object(k["F"])(t.innerCode,n,r,a);case 5:o=e.sent,t.RepairCount=o.data;case 7:case"end":return e.stop()}}),e)})))()},getSkuCollect:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n,r,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={vm:t.dialogData.vmType,nodeId:t.dialogData.nodeId,createUserId:t.$store.state.user.userInfo.userId},n=v()().startOf("M").format("YYYY-MM-DD"),r=v()().endOf("D").format("YYYY-MM-DD"),e.next=6,Object(k["L"])(t.innerCode,n,r,a);case 6:o=e.sent,t.SkuCollect=o.data,0===o.data.length&&(t.textIsShow=!0),t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()}},components:{newDataBtn:y},computed:{innerCode:function(){var t=this.dialogData.innerCode;return t},startDate:function(){var t=v()().startOf("M").format("YYYY-MM-DD HH:mm:ss");return t},endDate:function(){var t=v()().endOf("D").format("YYYY-MM-DD HH:mm:ss");return t}}},_=S,I=(a("a067"),Object(p["a"])(_,g,m,!1,null,"41f0a500",null)),j=I.exports,Y={data:function(){return{formInline:{userCode:""},orderLabel:"设备编号",sellData:[],nextDisable:!1,pageIndex:"",PolicyData:[],taskSearchData:{pageIndex:1,innerCode:"",status:"",loading:!1},isShowDialog:!1,dialogData:{}}},created:function(){this.getServiceData()},methods:{handleClick:function(){},getServiceData:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(k["J"])(t.taskSearchData);case 3:a=e.sent,a.data.currentPageRecords.forEach((function(t){t.vmStatus?t.vmStatus="运营":t.vmStatus="未投放","3"===t.vmStatus&&(t.vmStatus="撤机"),t.node.addr=t.node.addr.split("-"),t.node.addr=t.node.addr[t.node.addr.length-1]})),t.sellData=a.data,t.pageIndex=a.data.pageIndex,t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},modifyClick:function(t){this.isShowDialog=!0,this.dialogData=t},searchFn:function(){if(console.log(123456),this.formInline.userCode.length<=0)return this.$message.error("请输入设备编号");this.taskSearchData.innerCode=this.formInline.userCode,this.getServiceData()},getNextPage:function(){var t=parseInt(this.sellData.totalPage)-parseInt(this.sellData.pageIndex);console.log(t),1===t&&(this.nextDisable=!0),this.taskSearchData.pageIndex++,this.getServiceData(this.taskSearchData)},previousPage:function(t){this.taskSearchData.pageIndex--,this.getServiceData(this.taskSearchData)},newDataFn:function(){this.isShowDialog=!0},operateDataFn:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.BatchOperate.length){e.next=2;break}return e.abrupt("return",t.$message.warning("请勾选售货机"));case 2:return t.isModifyDialog=!0,e.next=5,Object(k["D"])();case 5:a=e.sent,n=a.data,t.PolicyData=n;case 8:case"end":return e.stop()}}),e)})))()}},components:{headSearch:i["a"],Mytable:h,aisleDialog:j},computed:{isdisable:function(){var t;return(null===(t=this.sellData)||void 0===t?void 0:t.pageIndex)<=1}}},M=Y,$=(a("e992"),Object(p["a"])(M,n,r,!1,null,"30e26271",null));e["default"]=$.exports},baf6:function(t,e,a){},e992:function(t,e,a){"use strict";a("6351")}}]);