(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5b2f002"],{"4c35":function(e,s,t){},"85b4":function(e,s,t){e.exports=t.p+"static/img/userPic.595745bd.png"},"8faf":function(e,s,t){"use strict";t("4c35")},"9ed6":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{staticClass:"loginApp"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"auto-complete":"on","label-position":"left",model:e.loginForm,rules:e.loginFormrules}},[o("img",{attrs:{src:t("85b4"),alt:""}}),o("el-form-item",{attrs:{prop:"loginName"}},[o("el-input",{staticClass:"form-item",attrs:{placeholder:"请输入账号",type:"text"},model:{value:e.loginForm.loginName,callback:function(s){e.$set(e.loginForm,"loginName",s)},expression:"loginForm.loginName"}},[o("i",{staticClass:"svg-container",attrs:{slot:"prefix"},slot:"prefix"},[o("svg-icon",{attrs:{iconClass:"phone"}})],1)])],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{ref:"password",staticClass:"form-item",attrs:{type:e.passwordType,placeholder:"请输入密码"},scopedSlots:e._u([{key:"suffix",fn:function(){return[o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)]},proxy:!0}]),model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}},[o("i",{staticClass:"svg-container",attrs:{slot:"prefix"},slot:"prefix"},[o("svg-icon",{attrs:{iconClass:"lock"}})],1)])],1),o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticClass:"form-item",attrs:{placeholder:"请输入验证码"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.submitFn(s)}},scopedSlots:e._u([{key:"append",fn:function(){return[o("img",{attrs:{src:e.$store.state.user.clientPic,alt:""},on:{click:e.changeCode}})]},proxy:!0}]),model:{value:e.loginForm.code,callback:function(s){e.$set(e.loginForm,"code",s)},expression:"loginForm.code"}},[o("i",{staticClass:"svg-container svg-check",attrs:{slot:"prefix"},slot:"prefix"},[o("svg-icon",{attrs:{iconClass:"check"}})],1)])],1),o("el-button",{ref:"login",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.submitForm}},[e._v("登录")])],1)],1)},r=[],n=t("c7eb"),i=t("1da1"),a={data:function(){return{loginForm:{loginName:"",password:"",code:"",loginType:"0"},passwordType:"password",loginFormrules:{loginName:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},codeTime:"",loginLoading:!1}},created:function(){this.$store.dispatch("user/getclientToken")},methods:{submitForm:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log(789),s.prev=1,e.loginLoading=!0,s.next=5,e.$refs.loginForm.validate();case 5:return s.next=7,e.$store.dispatch("user/userLogin",e.loginForm);case 7:if(e.$store.state.user.userInfo.success){s.next=11;break}return e.$message.error(e.$store.state.user.userInfo.msg),"验证码错误"===e.$store.state.user.userInfo.msg&&e.$store.dispatch("user/getclientToken"),s.abrupt("return");case 11:e.$message({type:"success",message:"登录成功"}),e.$router.push("/"),s.next=18;break;case 15:s.prev=15,s.t0=s["catch"](1),console.log(s.t0);case 18:return s.prev=18,e.loginLoading=!1,s.finish(18);case 21:case"end":return s.stop()}}),s,null,[[1,15,18,21]])})))()},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},changeCode:function(){var e=this;this.codeTime||(this.codeTime=setTimeout((function(){e.$store.dispatch("user/getclientToken",1024*e.loginForm.clientToken),e.codeTime=""}),1e3))},submitFn:function(){console.log(this.$refs.login.$el),this.$refs.login.$el.click(),this.$refs.login.$el.style.border="1px solid #3a8ee6"}}},l=a,c=(t("8faf"),t("2877")),p=Object(c["a"])(l,o,r,!1,null,"42f348da",null);s["default"]=p.exports}}]);